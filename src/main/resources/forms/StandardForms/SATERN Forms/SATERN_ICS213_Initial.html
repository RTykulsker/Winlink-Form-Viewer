<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Salvation Army  ICS213</title>

<style type="text/css">
body, td, th {
font-family: Arial,Helvetica,sans-serif;
font-size: 12px;
font-weight: inherit;
}
.zentriert {
font-size: 12px;
}
input, select {
padding: 1px;
-moz-border-radius-topleft: 2px;
-moz-border-radius-topright: 2px;
-moz-border-radius-bottomright: 2px;
-moz-border-radius-bottomleft: 2px;
font-family: Arial,Helvetica,sans-serif;
font-size: 12px;
font-weight: inherit;
}
textarea {
padding: 1px;
-moz-border-radius-topleft: 2px;
-moz-border-radius-topright: 2px;
-moz-border-radius-bottomright: 2px;
-moz-border-radius-bottomleft: 2px;
font-family: Arial,Helvetica,sans-serif;
font-size: 12px;
font-weight: inherit;
}
.rechtsbuendig {
font-size: 12px;
}
.SubmitBtn {
font-size: 12px;
}
.version {
color: #666666;
position: relative;
left: 0px;
top: 3px;
font-size: 12px;
}
h1, h2, h3, h4, h5, h6 {
font-style: normal;
font-weight: normal;
}
.style15 {font-size: 10pt; font-family: Arial, Helvetica, sans-serif; }
.auto-style3 {text-align: center;
}
.auto-style4 {font-size: medium;
}
.auto-style5 {font-size: x-large;
	color: #FF0000;
}
.style17 {font-size: 18}
.style19 {font-size: 18px}
.style22 {
	font-size: x-large;
	color: #ff8080;
	font-weight: bold;
	font-style: italic;
}
</style><!-- ICS 213 Template-->

<script>

function AutoGrowTextArea(textField)
{
if (textField.clientHeight < textField.scrollHeight)
{
textField.style.height = textField.scrollHeight + "px";
if (textField.clientHeight < textField.scrollHeight)
{
textField.style.height = (textField.scrollHeight * 2 - textField.clientHeight) + "px";
}
}
}
function Countthelines(f) { var text1 = f
var text2 = text1.replace(/\s+$/,"");
var split2 = text2.split("\n"); var mytotal = split2.length * 17;
if (mytotal < 150) {
mytotal = 150;
}
var tstr = mytotal.toString();
return tstr;
}
function newfix(f){
var ThisText = document.getElementById(f).value;
var makeit = Countthelines(ThisText);
document.getElementById(f).style.height = makeit+"px"; }
function Fixarea() {
newfix("Message");
// newfix("reply");
AutoGrowTextArea(document.getElementById("Message"));
// AutoGrowTextArea(document.getElementById("reply"));
}
function RWS(str){
var text2 = str.replace(/\s+$/,"");
return text2.trim();
}

</script>
<script>

function shortmonth(monthnum) {
var monthname;
shortmonths = ["JAN", "FEB", "MAR","APR", "MAY", "JUN", "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"] ;
monthname = shortmonths [monthnum];s
return monthname; }
function SetDateTime(TType,TheFld, FocusFld) {
var txt;
var myprompt;
var d = new Date(),
thisyear = d.getFullYear();
thismonth= d.getMonth();
thisday = d.getDate();
var monname;
h = (d.getHours()<10?'0':'') + d.getHours()
m = (d.getMinutes()<10?'0':'') + d.getMinutes()
s = (d.getSeconds()<10?'0':'') + d.getSeconds();
var now = new Date();
var utch = now.getUTCHours();
if (utch < 10) { utch = "0"+utch};
var utcs = now.getUTCMinutes();
if (utcs < 10) { utcs = "0"+utcs};
var myUTCtime = utch+":"+utcs+" Z";
var utcstr = d.toUTCString();
var localt = d.toLocaleTimeString();
var isostr = d.toISOString();
monthname = shortmonth (thismonth);
thismonth = thismonth + 1;
switch (TType) {
case 'hms' :
myprompt = h + ':' + m + ':' + s;
var RightNow = prompt("Time:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'hm' :
myprompt = h + ':' + m;
var RightNow = prompt("Time:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'm-d-y': myprompt = thismonth+ '-' + thisday+ '-'+ thisyear;
var RightNow = prompt("Date:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'm/d/y': myprompt = thismonth+ '/' + thisday+ '/'+ thisyear;
var RightNow = prompt("Date:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'd mmm y': myprompt = thisday+ ' ' + monthname+ ' '+ thisyear;
var RightNow = prompt("Date:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'mmm-d-y': myprompt = monthname+'-'+thisday+ '-' + thisyear;
var RightNow = prompt("Date:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'localampm': var myprompt = localt;
var RightNow = prompt("Local time:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'fulldate': var myprompt = thisyear+ '-'+thismonth+'-'+thisday;
var RightNow = prompt("Date:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'fulldatetime': var myprompt = thisyear+'-'+thismonth+ '-'+thisday+' '+h + ':' + m ;
var RightNow = prompt("Date time:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'afulldatetime': var myprompt = thisyear+'-'+thismonth+ '-'+thisday+' '+h + ':' + m ;
var RightNow = myprompt;
document.getElementById(TheFld).value = RightNow;
break;
case 'autodate': var RightNow = thisyear+'-'+thismonth+ '-'+thisday ;
//var RightNow = prompt("Date time:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'autotime': var RightNow = h + ':' + m ;
//var RightNow = prompt("Date time:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'iso': var myprompt = isostr;
var RightNow = prompt("Date time:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'utc': var myprompt = utcstr;
var RightNow = prompt("Date time:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'zuluDate': var myprompt = isostr;
myprompt = isostr.replace("T", " "); slen = myprompt.length;
myprompt = myprompt.substr(0, slen-13)+'Z';
var RightNow = prompt("UTC Date:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'AutozuluDate': var myprompt = isostr;
myprompt = isostr.replace("T", " "); slen = myprompt.length;
myprompt = myprompt.substr(0, slen-13)+'Z';
//var RightNow = prompt("UTC Date time:", myprompt);
document.getElementById(TheFld).value = myprompt;
break;

case 'zulu': var myprompt = isostr;
myprompt = isostr.replace("T", " "); slen = myprompt.length;
myprompt = myprompt.substr(0, slen-8)+' Z';
var RightNow = prompt("UTC Date time:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'UTChm': var myprompt = myUTCtime;
var RightNow = prompt("UTC time:", myprompt);
document.getElementById(TheFld).value = RightNow;
break;
case 'AutoUTChm': var myprompt = myUTCtime;
//var RightNow = prompt("UTC time:", myprompt);
document.getElementById(TheFld).value = myprompt;
break;
}
// if(FocusFld !== null && FocusFld !== '') {document.getElementById(FocusFld).focus()} --/
}; 

// add save load


function saveTextAsFile(fileNameToSaveAs, textToWrite) {
var textToWrite = document.getElementById('parseme').value; 
var fileNameToSaveAs = "SATERN 213 Initial Data  " + DateforFile()+".txt";
fileNameToSaveAs = prompt("", fileNameToSaveAs);

  /* Saves a text string as a blob file*/  
  var ie = navigator.userAgent.match(/MSIE\s([\d.]+)/),
      ie11 = navigator.userAgent.match(/Trident\/7.0/) && navigator.userAgent.match(/rv:11/),
      ieEDGE = navigator.userAgent.match(/Edge/g),
      ieVer=(ie ? ie[1] : (ie11 ? 11 : (ieEDGE ? 12 : -1)));

  if (ie && ieVer<10) {
    console.log("No blobs on IE ver<10");
    return;
  }

  var textFileAsBlob = new Blob([textToWrite], {
    type: 'text/plain'
  });

  if (ieVer>-1) {
    window.navigator.msSaveBlob(textFileAsBlob, fileNameToSaveAs);

  } else {
    var downloadLink = document.createElement("a");
    downloadLink.download = fileNameToSaveAs;
    downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
    downloadLink.onclick = function(e) { document.body.removeChild(e.target); };
    downloadLink.style.display = "none";
    document.body.appendChild(downloadLink);
    downloadLink.click();
  }
}


function destroyClickedElement(event)
{
    document.body.removeChild(event.target);
}

function loadFileAsText()
{

    var fileToLoad = document.getElementById("fileToLoad").files[0];
 
    var fileReader = new FileReader();
    fileReader.onload = function(fileLoadedEvent) 
    {
        var textFromFileLoaded = fileLoadedEvent.target.result;
        document.getElementById("inputTextToSave").value = textFromFileLoaded;
    };
    fileReader.readAsText(fileToLoad, "UTF-8");
}


function DateforFile(RightNow) {
var txt;
var d = new Date(),
thisyear = d.getFullYear();
thismonth= d.getMonth();
thismonth = thismonth+1;
if (thismonth < 10) { thismonth = "0" + thismonth}

thisday = d.getDate();
if (thisday < 10) { thisday = "0" + thisday}

h = (d.getHours()<10?'0':'') + d.getHours()
m = (d.getMinutes()<10?'0':'') + d.getMinutes()
var myprompt = thisyear+ '-'+thismonth+'-'+thisday+' '+h + '_' + m ;
return myprompt;
}

function isObject(arg) {
  return Object.prototype.toString.call(arg)==='[object Object]';
}

function formDataToObject(elForm) {
  if (!elForm instanceof Element) return;
  var fields = elForm.querySelectorAll('input, select, textarea'),
    o = {};
  for (var i=0, imax=fields.length; i<imax; ++i) {
    var field = fields[i],
      sKey = field.name || field.id;
    if (field.type==='button' || field.type==='image' || field.type==='submit' || !sKey) continue;
    switch (field.type) {
      case 'checkbox':
        o[sKey] = +field.checked;
        break;
      case 'radio':
        if (o[sKey]===undefined) o[sKey] = '';
        if (field.checked) o[sKey] = field.value;
        break;
      case 'select-multiple':
        var a = [];
        for (var j=0, jmax=field.options.length; j<jmax; ++j) {
          if (field.options[j].selected) a.push(field.options[j].value);
        }
        o[sKey] = a;
        break;
      default:
        o[sKey] = field.value;
    }
  }
//alert('Form data:\n\n' + JSON.stringify(o, null, 2));
 document.getElementById('parseme').value = JSON.stringify(o, null, 2);
//  return o;
}

function populateForm(o) {

o =  JSON.parse(document.getElementById('parseme').value);
 //if (!isObject(o)) return;
if (!isObject(o)) return;
  for (var i in o) {
    var el = document.getElementById(i) || document.querySelector('[name=' + i + ']');
    if (el.type==='radio') el = document.querySelectorAll('[name=' + i + ']');
    switch (typeof o[i]) {
      case 'number':
        el.checked = o[i];
        break;
      case 'object':
        if (el.options && o[i] instanceof Array) {
          for (var j=0, jmax=el.options.length; j<jmax; ++j) {
            if (o[i].indexOf(el.options[j].value)>-1) el.options[j].selected = true;
          }
        }
        break;
      default:
        if (el instanceof NodeList) {
          for (var j=0, jmax=el.length; j<jmax; ++j) {
            if (el[j].value===o[i]) el[j].checked = true;
          }
        } else {
          el.value = o[i];
        }
    }
  }
    Fixfields();


}

function SaveData() {
	
			formDataToObject(document.getElementById('myform'))
			saveTextAsFile();
			
			//saveTextAsFile();
			}

//-------
 function readBlob(opt_startByte, opt_stopByte) {
  
    var files = document.getElementById('files').files;
    if (!files.length) {
      alert('Please select a file!');
      return;
    }

    var file = files[0];
    var start = parseInt(opt_startByte) || 0;
    var stop = parseInt(opt_stopByte) || file.size - 1;

    var reader = new FileReader();

    // If we use onloadend, we need to check the readyState.
    reader.onloadend = function(evt) {
      if (evt.target.readyState == FileReader.DONE) { // DONE == 2
        document.getElementById('byte_content').textContent = evt.target.result;
        document.getElementById('byte_range').textContent = 
            ['Read bytes: ', start + 1, ' - ', stop + 1,
             ' of ', file.size, ' byte file'].join('');
      }
    };

    var blob = file.slice(start, stop + 1);
    reader.readAsBinaryString(blob);
  }
    	
  window.onload = function () { 
 
 //Check the support for the File API support 
 if (window.File && window.FileReader && window.FileList && window.Blob) {
    var fileSelected = document.getElementById('txtfiletoread');
	
    fileSelected.addEventListener('change', function (e) { 
         //Set the extension for the file 
         var fileExtension = /text.*/; 
         //Get the file object 
         var fileTobeRead = fileSelected.files[0];
        //Check of the extension match 
         if (fileTobeRead.type.match(fileExtension)) { 
             //Initialize the FileReader object to read the 2file 
			
             var fileReader = new FileReader(); 
             fileReader.onload = function (e) { 
                 var fileContents = document.getElementById('filecontents'); 
                
				document.getElementById('parseme').value =fileReader.result;
				populateForm(obj = document.getElementById('parseme').value);
					 } 
             fileReader.readAsText(fileTobeRead); 
         } 
         else { 
             alert("Please select text file"); 
         }
 
    }, false);
} 
 else { 
     alert("Files are not supported"); 
 } 
 Fixfields();
 }
 
 function Fixfields() {  
AutoGrowTextArea(document.getElementById("Message"));
//AutoGrowTextArea(document.getElementById("FacIns"));
//AutoGrowTextArea(document.getElementById("FacIns1"));




}

//<body onload="SetDateTime('AutozuluDate','msgDate');SetDateTime('AutoUTChm','msgTime'); ">
// function setcolors() {

</script>
</head>
<body >
<form  style="font-family: Arial;" pbzloc="3" onsubmit="return confirm('To complete your form submission, click OK and close the open browser window. You will return to the new message window so you can post your message to the outbox');" method="post" id="myform" enctype="multipart/form-data" action="http://{FormServer}:{FormPort}">
<table style="width: 1143px; height: 522px;" align="center" border="0">
<tbody>
<tr>
<td >
<table border="1" cellpadding="6" cellspacing="0"" bordercolor="#999999" style="width: 874px;  border="2>
<tbody>
<tr>
<td style="height: 35px;">
  <table width="100%" border="1" cellpadding="0" cellspacing="0" bordercolor="#999999" style="text-align: left;  height: 50px;">
    <tbody>
      <tr>
        <td style="vertical-align: top; text-align: center;">Precedence<br />
            <select id="Priority" name="Priority" onchange="changeBGColor();" pbzloc="4">
              <option selected="selected" value="Routine">Routine</option>
              <option value="Welfare">Welfare</option>
              <option value="Priority">Priority</option>
              <option value="Emergency">Emergency</option>
            </select>
        </td>
        <td style="vertical-align: top; text-align: center;">Org Station<br />
            <input title="You can overwrite this callsign if needed." maxlength="10" size="10" name="OrgStation" required="required" style="width: 100px" /></td>
        <td style="vertical-align: top; text-align: center;">Org Location<br />
            <input maxlength="22" size="22" required="required" name="OrgLocation" /></td>
        <td style="vertical-align: top; text-align: center;">Time<br />
          <input title="Click to Change Time" maxlength="8" size="8" placeholder="Click for Time" name="msgTime" id="msgTime" onclick="SetDateTime('UTChm',this.id)" />
</td>
        <td style="vertical-align: top; text-align: center;">Date<br />            <input title="Defaults to local date, you can overwrite if needed." maxlength="11" size="12" placeholder="Click for Date" name="msgDate" id="msgDate" onclick="SetDateTime('zuluDate',this.id)" /></td>
      </tr>
    </tbody>
  </table></td>
</tr>
<tr>
  <td colspan="2" style="text-align: center; vertical-align: top; background-color: rgb(255, 255, 204);"><span class="style22">Salvation Army Team Emergency Radio Network</span></td>
</tr>
<tr>
<td colspan="2" bgcolor="#f8f8ff" style="text-align: center; vertical-align: top; "><p><span class="auto-style3"><small><strong><big><small><big><span class="auto-style4">SATERN General Message&nbsp; ICS213</span></big></small></big><small><big></big></small></strong></small></span></p>
  <p>
    <input type="button" value=" Load SATERN Initial 213 data " onclick="document.getElementById('txtfiletoread').click();" />
    <input type="file" id="txtfiletoread" accept=".txt"  style="display: none;"/>
    </td>
</tr>
<tr>
<td colspan="4" valign="middle" style="text-align: center;"><div align="left"><strong style="font-weight: normal;">
        &nbsp;&nbsp;1.&nbsp;Incident Name</strong><strong style="font-weight: normal;">:</strong>        
        <input id="Incident_Name" maxlength="60" name="Incident_Name" required="required" size="70" type="text" />
</div></td>
</tr>
<tr>
<td colspan="2" valign="middle" style="text-align: center;"><div align="left">
  <strong><span style="font-weight: normal;">&nbsp;&nbsp;2. To</span></strong><strong style="font-weight: normal;">: </strong>
      <input id="To_Name" maxlength="60" required="required" name="To_Name" size="75" type="text" />
  </p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Phone:
      <input id="To_Phone" maxlength="24" required="required" name="To_Phone" size="25" type="text" style="width: 104px" />
&nbsp;&nbsp;&nbsp;&nbsp;Email:
  <input id="To_Email" maxlength="35" name="To_Email" size="40" type="text" style="width: 104px" />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Town, State, Country:
  <input id="To_TSC" maxlength="60" name="To_TSC" size="70" required="required"type="text" style="width: 300px" />
  </p>
</div></td>
</tr>
<tr>
<td colspan="2" valign="middle" style="text-align: center;"><div align="left"><strong style="font-weight: normal;">
  &nbsp;&nbsp;3. From</strong><small><big>: </big>
  <input id="From_Name" maxlength="60" name="From_Name" size="75" type="text" />
<textarea name="parseme" cols="60" id="parseme" style="display: none;"></textarea>  </small>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Phone:
        <input id="From_Phone" maxlength="24" name="From_Phone" required="required" size="25" type="text" style="width: 104px" />
&nbsp;&nbsp;&nbsp;&nbsp;Email:
  <input id="From_Email" maxlength="35" name="From_Email" size="40" type="text" style="width: 104px" />
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Town, State, Country:&nbsp;
 <input id="From_TSC" maxlength="60" name="From_TSC" required="required" size="70" type="text" style="width: 300px" />
</p>
</div></td>
</tr>
<tr>
<td colspan="3" valign="middle" style="text-align: center;"><div align="left">
      &nbsp;&nbsp;4. Subject:&nbsp;      
      <input id="Subjectline" maxlength="50" name="Subjectline" required="required" size="55" type="text" />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.
&amp; 6. Date/Time: &nbsp;
  <input size="32" required="required" name="DateTime" maxlength="28" id="DateTime" placeholder="Click for UTC Date/Time" onclick="SetDateTime('zulu',this.id)" title="Defaults to UTC date/time, you can overwrite it" />
</div></td>
</tr>
<tr>
<td colspan="4" valign="middle" style="height: 88px; vertical-align: top; text-align: center;"><div align="left">
      &nbsp;&nbsp;7.
  Message:<span class="style17">&nbsp;<span class="style19">&nbsp;</span></span><br />
</div>
  <div align="left">
    <label>
    &nbsp;&nbsp;
    <textarea cols="120" id="Message" name="Message" rows="4" onkeyup="AutoGrowTextArea(this)" onchange="this.value=RWS(this.value)"></textarea>
    </label>
  </div></td>
</tr>
<tr>
<td colspan="4" valign="middle" style="text-align: center;"><div align="left">
  &nbsp;&nbsp;8. Sent By:
  <input id="Approved_Name" placeholder="Call sign"  maxlength="30" name="Approved_Name" required="required" size="35" />
  &nbsp; <small><big>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Operator Name :
</big></small>
<input id="Approved_PosTitle" maxlength="30" name="Approved_PosTitle" required="required" size="35" type="text" />
</div></td>
</tr>
<tr>
  <td colspan="4" valign="middle" style="text-align: center;"><table width="100%"  border="0" cellpadding="0" cellspacing="0" bordercolor="#999999">
    <tr valign="top">
      <td width="83%"><div align="left">
            <small>
            <input type="button" value="Save SATERN Initial 213 data "  style="color: blue;"onclick="SaveData()" />
            <span style="color: rgb(128, 0, 0);"><span style="font-size: 12px;">&nbsp;</span>&nbsp;</span></small>
            <input class="SubmitBtn" enctype="multipart/form-data" id="Submit" method="Post" name="Submit" pbzloc="4" size="8" style=" width: 48px; color: green;" value="Submit" type="submit" />
            <input class="BtnFormat2" value="Reset Form " name="ResetForm" style="color: rgb(204, 0, 0);" type="reset" />
      </div></td>
      <td width="17%"><div align="right"><span class="style15">Version 2  WA5EEZ
                <input name="Templateversion" type="hidden" id="Templateversion" value="2" />
      </span></div></td>
    </tr>
  </table></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</form>
</body></html>